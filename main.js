(()=>{"use strict";var t,e=new Uint8Array(16);function n(){if(!t&&!(t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return t(e)}const a=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,r=function(t){return"string"==typeof t&&a.test(t)};for(var d=[],s=0;s<256;++s)d.push((s+256).toString(16).substr(1));const o=function(t,e,a){var s=(t=t||{}).random||(t.rng||n)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,e){a=a||0;for(var o=0;o<16;++o)e[a+o]=s[o];return e}return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(d[t[e+0]]+d[t[e+1]]+d[t[e+2]]+d[t[e+3]]+"-"+d[t[e+4]]+d[t[e+5]]+"-"+d[t[e+6]]+d[t[e+7]]+"-"+d[t[e+8]]+d[t[e+9]]+"-"+d[t[e+10]]+d[t[e+11]]+d[t[e+12]]+d[t[e+13]]+d[t[e+14]]+d[t[e+15]]).toLowerCase();if(!r(n))throw TypeError("Stringified UUID is invalid");return n}(s)},i=[];let c,l,u=[],g="";const m={oldListIndex:null,newListIndex:null,oldCardIndex:null,newCardIndex:null,draggableElCardId:"",draggableElListId:"",afterElCardId:"",afterElListId:""},f=document.querySelector(".container"),p=document.querySelector(".modal"),_=[{title:"Para Hacer",id:o(),cards:[{id:o(),text:"Agregar Botón de Aceptar"},{id:o(),text:"Rellenar Formulario"},{id:o(),text:"Testear base de datos"}]},{title:"En Progreso",id:o(),cards:[{id:o(),text:"Controlar validez de inputs"},{id:o(),text:"Eventos de teclado"}]},{title:"Hecho",id:o(),cards:[{id:o(),text:"Carga de datos"}]},{title:"Bugs",id:o(),cards:[{id:o(),text:"Botón de cancelar no funciona"},{id:o(),text:"No pueden agregarse columnas"}]}];function E(t){console.log(t.target.innerText,g),t.target.innerText||(console.log("y?"),t.target.innerText=g);const e=t.target.closest(".list__card"),n=t.target.closest(".list").id,a=u.findIndex((t=>t.id===n)),r=u[a].cards.findIndex((t=>t.id===e.id));u[a].cards[r].text=t.target.innerText,t.target.contentEditable="false",console.log(u[a].cards[r].text),b()}function v(){document.querySelectorAll(".list__card").forEach((t=>t.classList.remove("selected")))}function x(t,e,n){const a=document.createElement("div");a.classList.add("list__card"),a.draggable="true",a.id=n;const r=document.createElement("p");r.classList.add("list__card-text"),r.innerText=e;const d=document.createElement("div");d.classList.add("list__card-btns");const s=document.createElement("button");s.classList.add("list__card-edit-btn");const o=document.createElement("i");o.classList.add("far","fa-edit"),s.appendChild(o);const i=document.createElement("button");i.classList.add("list__card-remove-btn");const c=document.createElement("i");c.classList.add("far","fa-trash-alt"),i.appendChild(c),d.append(s,i),a.append(r,d),t.append(a)}function b(){console.log("save local"),localStorage.setItem("kanbanCards",JSON.stringify(u))}document.addEventListener("click",(t=>{if(t.target.closest(".list__card")&&function(t){const e=t.closest(".list__card");e.classList.contains("selected")?v():(v(),e.classList.add("selected"))}(t.target),t.target.closest(".list__card-remove-btn")&&function(t){const e=t.closest(".list__card"),n=e.closest(".list").id,a=u.findIndex((t=>t.id===n));u[a].cards=u[a].cards.filter((t=>t.id!==e.id)),e.remove(),b()}(t.target),t.target.closest(".list__card-edit-btn")){const e=t.target.closest(".list__card");g=e.querySelector(".list__card-text").innerText,function(t){console.log(t);const e=t.target.closest(".list__card").querySelector(".list__card-text");e.contentEditable="true",e.focus(),document.execCommand("selectAll",!1,null),document.getSelection().collapseToEnd(),e.onblur=t=>{E(t)}}(t)}})),document.addEventListener("dragstart",(t=>{t.target.classList.contains("list__card")&&(v(),t.target.classList.add("dragging"),m.draggableElListId=t.target.closest(".list").id)})),document.addEventListener("dragend",(t=>{t.target.classList.contains("dragging")&&t.target.classList.remove("dragging")})),document.addEventListener("keydown",(t=>{if("Enter"===t.code&&"H2"===t.target.tagName&&function(t){t.target.blur();const e=t.target.closest(".list").id,n=u.findIndex((t=>t.id===e));""===t.target.innerText?(console.log("no se puede"),t.target.innerText=u[n].title):(console.log("cambiar titulo"),u[n].title=t.target.innerText),b()}(t),"Enter"===t.code&&"INPUT"===t.target.tagName){const e=t.target.parentElement.querySelector(".list__card-container"),n=o();if(""===t.target.value)return;x(e,t.target.value,n),function(t,e,n){const a=t.closest(".list").id,r=u.findIndex((t=>t.id===a));u[r].cards.push({id:n,text:e}),b()}(t.target,t.target.value,n),console.log(t.target.value),"renova"===t.target.value&&(p.style.visibility="visible",p.classList.add("visible"),setTimeout((()=>{p.classList.remove("visible"),setTimeout((()=>{p.style.visibility="hidden"}),500)}),3e3)),t.target.value="",t.target.blur()}"Enter"===t.code&&"P"===t.target.tagName&&E(t)})),window.addEventListener("load",(function(){console.log("load local"),u=localStorage.getItem("kanbanCards")?JSON.parse(localStorage.kanbanCards):_,u.forEach((t=>{!function(t){const e=document.createElement("div");e.classList.add("list"),e.id=t.id;const n=document.createElement("h2");n.contentEditable="true",n.classList.add("list__title"),n.innerText=t.title||"Titulo";const a=document.createElement("div");a.classList.add("list__card-container"),e.append(n,a),f.append(e)}(t);const e=document.getElementById(`${t.id}`);t.cards.forEach((t=>{const n=e.querySelector(".list__card-container");i.push(n),x(n,t.text,t.id)})),function(t){const e=document.createElement("input");e.type="text",e.classList.add("list__add-card"),e.placeholder="Añada una tarjeta",t.append(e)}(e)})),i.forEach((t=>{t.addEventListener("dragover",(e=>{e.preventDefault(),l=function(t,e){return[...t.querySelectorAll(".list__card:not(.dragging")].reduce(((t,n)=>{const a=n.getBoundingClientRect(),r=e-a.top-a.height/2;return r<0&&r>t.offset?{offset:r,element:n}:t}),{offset:Number.NEGATIVE_INFINITY}).element}(t,e.clientY),c=document.querySelector(".dragging"),null==l?t.append(c):t.insertBefore(c,l)}))})),function(){const t=document.createElement("ul");t.classList.add("squares");for(let e=0;e<10;e++){const e=document.createElement("li");t.appendChild(e)}f.appendChild(t)}()}))})();
//# sourceMappingURL=main.js.map